<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>从输入URL到页面呈现：Web请求的神奇旅程 | Bruce的博客</title>
<meta name=keywords content="浏览器原理,网络协议,前端开发,性能优化,Web技术,HTTP协议,渲染引擎"><meta name=description content="深入解析浏览器处理网页请求的全过程，包括URL解析、DNS查询、TCP/TLS连接、HTTP请求、服务器处理、DOM构建与页面渲染"><meta name=author content><link rel=canonical href=https://www.yss520.online/zh/posts/url-to-render/><link crossorigin=anonymous href=/assets/css/stylesheet.50fb993581dec76187b65aabd179be9f0f5b64458c619ef95b7016d351ad64db.css integrity="sha256-UPuZNYHex2GHtlqr0Xm+nw9bZEWMYZ75W3AW01GtZNs=" rel="preload stylesheet" as=style><link rel=icon href=https://www.yss520.online/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.yss520.online/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.yss520.online/favicon-32x32.png><link rel=apple-touch-icon href=https://www.yss520.online/apple-touch-icon.png><link rel=mask-icon href=https://www.yss520.online/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://www.yss520.online/zh/posts/url-to-render/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:type" content="article"><meta property="og:url" content="https://www.yss520.online/zh/posts/url-to-render/"><meta property="og:title" content="从输入URL到页面呈现：Web请求的神奇旅程 | Bruce的博客"><meta property="og:description" content="深入解析浏览器处理网页请求的全过程，包括URL解析、DNS查询、TCP/TLS连接、HTTP请求、服务器处理、DOM构建与页面渲染"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://www.yss520.online/zh/posts/url-to-render/"><meta property="twitter:title" content="从输入URL到页面呈现：Web请求的神奇旅程 | Bruce的博客"><meta property="twitter:description" content="深入解析浏览器处理网页请求的全过程，包括URL解析、DNS查询、TCP/TLS连接、HTTP请求、服务器处理、DOM构建与页面渲染"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.yss520.online\/zh\/posts\/url-to-render\/"},"headline":"从输入URL到页面呈现：Web请求的神奇旅程","description":"深入解析浏览器处理网页请求的全过程，包括URL解析、DNS查询、TCP\/TLS连接、HTTP请求、服务器处理、DOM构建与页面渲染","image":[],"datePublished":"2024-06-18T20:30:00\u002b08:00","dateModified":"2024-06-18T20:30:00\u002b08:00","author":{"@type":"Person","name":""},"publisher":{"@type":"Organization","name":"Bruce的博客","logo":{"@type":"ImageObject","inLanguage":"zh","url":"https:\/\/www.yss520.online\/images\/logo.svg"}}}</script><style>img[src^="/"]{content:attr(src)}.not-found-container{min-height:70vh}.lightbox{z-index:9999}.lb-outerContainer{border-radius:8px}.lb-dataContainer{border-radius:0 0 8px 8px}.lb-image{border-radius:4px}</style><script>document.addEventListener("DOMContentLoaded",function(){const t=document.documentElement.lang||"en",e=window.location.origin;function s(){const e=document.querySelectorAll("img");e.forEach(e=>{e.getAttribute("src")&&(e.onerror=function(){o(this)})})}function o(s){if(!s.src)return;const i=s.src,o=i.startsWith(e)?i.substring(e.length):i;if(s.dataset.triedPaths){const e=JSON.parse(s.dataset.triedPaths);if(e.includes(o))return;e.push(o),s.dataset.triedPaths=JSON.stringify(e)}else s.dataset.triedPaths=JSON.stringify([o]);const a=[`/images${o}`,`/images/${o.replace(/^\//,"")}`,`/images/${t}${o}`,o.replace(`/${t}/`,"/"),o.replace(/^\/[a-z]{2}\//,"/"),`/static${o}`,`/static/images${o}`];n(s,a,0)}function n(t,s,o){if(o>=s.length){t.src="/images/placeholder.svg",t.onerror=null;return}const i=s[o],a=i.startsWith("http")?i:`${e}${i}`;t.onerror=function(){n(t,s,o+1)},t.src=a}s()})</script><meta property="og:url" content="https://www.yss520.online/zh/posts/url-to-render/"><meta property="og:site_name" content="Bruce的博客"><meta property="og:title" content="从输入URL到页面呈现：Web请求的神奇旅程"><meta property="og:description" content="深入解析浏览器处理网页请求的全过程，包括URL解析、DNS查询、TCP/TLS连接、HTTP请求、服务器处理、DOM构建与页面渲染"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-06-18T20:30:00+08:00"><meta property="article:modified_time" content="2024-06-18T20:30:00+08:00"><meta property="article:tag" content="浏览器原理"><meta property="article:tag" content="网络协议"><meta property="article:tag" content="前端开发"><meta property="article:tag" content="性能优化"><meta property="article:tag" content="Web技术"><meta property="article:tag" content="HTTP协议"><meta property="og:image" content="https://www.yss520.online/images/covers/browser-request-journey.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.yss520.online/images/covers/browser-request-journey.jpg"><meta name=twitter:title content="从输入URL到页面呈现：Web请求的神奇旅程"><meta name=twitter:description content="深入解析浏览器处理网页请求的全过程，包括URL解析、DNS查询、TCP/TLS连接、HTTP请求、服务器处理、DOM构建与页面渲染"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.yss520.online/zh/posts/"},{"@type":"ListItem","position":2,"name":"从输入URL到页面呈现：Web请求的神奇旅程","item":"https://www.yss520.online/zh/posts/url-to-render/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"从输入URL到页面呈现：Web请求的神奇旅程","name":"从输入URL到页面呈现：Web请求的神奇旅程","description":"深入解析浏览器处理网页请求的全过程，包括URL解析、DNS查询、TCP/TLS连接、HTTP请求、服务器处理、DOM构建与页面渲染","keywords":["浏览器原理","网络协议","前端开发","性能优化","Web技术","HTTP协议","渲染引擎"],"articleBody":"从输入 URL 到页面呈现：Web 请求的神奇旅程 前言 几乎每次面试都离不开的简单却极其深刻的问题：“当我们在浏览器中输入 URL 并按下回车后，到底发生了什么？“这个问题涵盖了现代 Web 技术的方方面面，从网络协议到渲染引擎，从 DNS 解析到内容安全策略。\n作为一名在互联网公司工作了 8 年的全栈工程师， 今天我想与大家分享从输入 URL 到页面呈现这个过程中隐藏的复杂细节，揭开现代 Web 世界的神秘面纱。\n第一阶段：URL 解析与导航启动 当你在浏览器的地址栏中输入\"https://example.com\"并按下回车键时，一个复杂的请求流程就此启动。\n1. URL 解析 浏览器首先会对输入的 URL 进行解析，识别出其中的不同组成部分：\n协议：https:// 主机名：example.com 路径：/ (根路径) 查询参数：无 片段标识符：无 如果你输入的是不完整的 URL（例如只输入\"example.com”），浏览器会自动补全协议部分，通常默认为\"http://“或者\"https://\"。\n2. 重定向检查 浏览器会首先检查是否需要进行任何形式的重定向：\nHSTS 检查：如果网站在 HSTS（HTTP 严格传输安全）预加载列表中，或之前访问时设置了 HSTS 头部，浏览器会自动将 HTTP 请求升级为 HTTPS。 301/302 重定向缓存：浏览器会检查该 URL 是否有永久(301)或临时(302)重定向记录缓存。 3. 浏览器缓存检查 在发起网络请求之前，浏览器会检查本地缓存中是否有可用的响应：\n内存缓存：首先检查 RAM 中最近访问过的资源。 磁盘缓存：然后检查硬盘上存储的资源。 Service Worker 缓存：如果网站注册了 Service Worker，浏览器会检查其管理的缓存。 这个过程遵循一套完备的缓存策略，基于 HTTP 头信息如Cache-Control、ETag和Last-Modified决定是否使用缓存内容。\n4. 应用拦截器 现代浏览器扩展和安全软件可能会在此阶段拦截请求：\n浏览器扩展：广告拦截器或隐私保护工具可能会阻止某些 URL。 安全检查：浏览器会对 URL 进行安全检查，防止钓鱼网站或已知的恶意站点。 第二阶段：DNS 解析 一旦浏览器确定需要发起网络请求，它必须将人类可读的域名转换为机器可理解的 IP 地址。\n1. DNS 解析过程 DNS（域名系统）解析遵循多级缓存策略，按顺序查询：\n浏览器 DNS 缓存：浏览器会首先检查自己的 DNS 缓存。 操作系统 DNS 缓存：如果浏览器缓存未命中，会查询操作系统缓存。 路由器 DNS 缓存：接下来查询本地网络路由器的缓存。 ISP DNS 服务器：如果本地都未命中，请求会发送至 ISP 的 DNS 服务器。 递归 DNS 查询：如果 ISP 的 DNS 服务器没有答案，它会启动递归查询： 查询根域名服务器(.com，.org 等的管理者) 查询顶级域名服务器(例如.com 的管理者) 查询权威域名服务器(管理 example.com 的服务器) 每一步 DNS 查询都可能涉及多个服务器和复杂的负载均衡策略。例如，大型网站通常使用地理分布式 DNS，根据用户位置返回最近数据中心的 IP 地址。\n2. DNS 安全考量 现代 DNS 解析过程中还包含多重安全机制：\nDNSSEC：数字签名验证，防止 DNS 记录被篡改。 DNS over HTTPS (DoH) 和 DNS over TLS (DoT)：加密 DNS 查询，防止窃听。 DNS 重绑定保护：防止攻击者利用 DNS 变更进行攻击。 第三阶段：建立网络连接 获取到目标服务器的 IP 地址后，浏览器需要建立一个网络连接。\n1. TCP 连接建立 对于 HTTP/1.1 和一些 HTTP/2 的实现，浏览器会与服务器建立 TCP 连接，这涉及著名的三次握手过程：\nSYN：客户端发送 SYN（同步）包到服务器，表明它想建立连接，并包含初始序列号。 SYN-ACK：服务器回应一个 SYN-ACK（同步-确认）包，确认收到客户端的 SYN，并包含服务器自己的初始序列号。 ACK：客户端发送 ACK（确认）包，确认收到服务器的 SYN-ACK。 这个过程确保了双方都准备好发送和接收数据，并且都知道对方的初始序列号。\n2. TLS 握手（HTTPS） 如果是 HTTPS 连接，在 TCP 连接建立后，还需要进行 TLS 握手来建立加密通道：\nClient Hello：客户端发送支持的加密套件和一个随机数。 Server Hello：服务器选择一个加密套件，并发送自己的随机数和数字证书。 证书验证：客户端验证服务器的数字证书是否由受信任的证书颁发机构(CA)签发。 密钥交换：使用非对称加密，客户端和服务器安全地协商出会话密钥。 切换到加密通信：双方开始使用对称加密和协商好的会话密钥进行后续通信。 TLS 1.3（最新版本）简化了这个流程，只需 1-RTT（往返时间）即可完成握手，相比 TLS 1.2 的 2-RTT 显著提升了性能。\n3. HTTP/2 和 HTTP/3 的连接特性 现代 Web 应用越来越多地采用 HTTP/2 和 HTTP/3 协议：\nHTTP/2：使用多路复用，在单一 TCP 连接上并行处理多个请求，减少了连接建立的开销。 HTTP/3：基于 QUIC 协议（采用 UDP 而非 TCP），提供内置加密，消除了 TCP+TLS 的额外延迟，实现 0-RTT 连接恢复。 第四阶段：发送 HTTP 请求 连接建立后，浏览器会构造并发送 HTTP 请求。\n1. HTTP 请求结构 一个完整的 HTTP 请求通常包含：\n请求行：包含 HTTP 方法（如 GET）、资源路径和 HTTP 版本。 请求头：包含多个键值对，提供关于请求和客户端的附加信息。 空行：表示头部结束。 请求体：对于 POST 等方法，包含要发送的数据。 一个典型的请求头包含诸多信息：\nUser-Agent：浏览器类型和版本 Accept：可接受的响应内容类型 Accept-Language：偏好的语言 Accept-Encoding：支持的压缩方式 Connection：连接管理选项 Cookie：之前从该站点接收的 Cookie Cache-Control：缓存策略指令 Referer：请求来源页面 Authorization：认证凭证 2. Cookie 和状态管理 HTTP 本质上是无状态协议，但通过 Cookie 机制可以实现状态管理：\n浏览器会自动将与目标域名相关的所有 Cookie 附加到请求头中。 这些 Cookie 可能包含会话标识符、用户偏好设置或跟踪数据。 现代 Web 应用还可能使用localStorage、sessionStorage或IndexedDB等机制在客户端存储数据。 3. 跨域请求处理 浏览器对跨域请求有严格限制（同源策略），涉及到 CORS（跨域资源共享）机制：\n对于跨域请求，浏览器会先发送一个\"预检\"OPTIONS 请求。 服务器必须在响应中包含适当的 CORS 头，如Access-Control-Allow-Origin。 如果未获得正确授权，浏览器会阻止请求或限制响应处理。 第五阶段：服务器处理请求 HTTP 请求到达服务器后，服务器需要处理这个请求并生成响应。\n1. Web 服务器处理 首先，Web 服务器（如 Nginx、Apache、IIS 等）会接收并初步处理请求：\n负载均衡：大型网站通常会使用负载均衡器将请求分发到多台服务器。 URL 路由：根据 URL 确定如何处理请求，可能是提供静态文件或者转发到应用服务器。 HTTPS 解密：解密客户端发送的加密数据。 2. 应用服务器处理 动态内容通常由应用服务器处理：\n请求路由：基于 URL 路径将请求路由到相应的处理器/控制器。 身份验证：验证用户身份（如果需要）。 业务逻辑执行：执行与请求相关的业务逻辑。 数据存取：与数据库或其他存储系统交互。 模板渲染：使用模板引擎生成 HTML 响应。 API 处理：对于 API 请求，处理并返回结构化数据（如 JSON）。 3. 数据库交互 许多 Web 应用需要与数据库交互：\n连接池管理：维护预先建立的数据库连接，以减少开销。 查询执行：执行 SQL 查询或 NoSQL 操作。 事务处理：确保数据操作的原子性和一致性。 查询缓存：缓存常见查询结果，提高性能。 ORM 中间层：许多应用使用对象关系映射（ORM）框架简化数据库交互。 4. 缓存层 现代 Web 架构通常包含多层缓存：\n内存缓存：如 Redis 或 Memcached，存储热点数据。 HTTP 缓存头生成：设置适当的缓存控制头，指导客户端和中间代理如何缓存响应。 CDN 集成：对于静态资源，可能会更新 CDN 或配置 CDN 缓存规则。 第六阶段：服务器返回响应 处理完请求后，服务器会构造并返回 HTTP 响应。\n1. HTTP 响应结构 一个完整的 HTTP 响应包含：\n状态行：包含 HTTP 版本、状态码和状态消息。 响应头：包含关于响应和服务器的附加信息。 空行：表示头部结束。 响应体：请求的资源内容。 常见的响应头包括：\nContent-Type：响应体的媒体类型 Content-Length：响应体的字节长度 Content-Encoding：响应体的编码方式 Cache-Control：缓存指令 ETag：资源的唯一标识符 Set-Cookie：设置 Cookie X-Content-Type-Options：防止 MIME 类型嗅探 Content-Security-Policy：内容安全策略 2. 压缩与性能优化 为了减少传输大小，服务器通常会压缩响应体：\nGzip/Deflate：传统的压缩算法，兼容性好。 Brotli：更现代的压缩算法，提供更高的压缩率。 图像优化：自适应图像格式（如 WebP、AVIF）和尺寸。 HTTP/2 服务器推送：主动推送关联资源，减少后续请求。 3. 安全响应头 现代 Web 应用需要设置各种安全相关的响应头：\nStrict-Transport-Security：强制使用 HTTPS。 X-Frame-Options：防止点击劫持攻击。 X-XSS-Protection：帮助阻止 XSS 攻击。 Content-Security-Policy：限制资源加载和脚本执行。 Referrer-Policy：控制 Referer 头的信息量。 Permissions-Policy：控制浏览器功能的使用。 第七阶段：浏览器处理响应 当浏览器接收到服务器的响应后，将开始处理这些数据。\n1. 响应状态码处理 浏览器根据 HTTP 状态码决定如何处理响应：\n2xx：成功响应，继续处理响应体。 3xx：重定向，浏览器会按照Location头跟随重定向。 4xx：客户端错误，显示错误页面或者进行特殊处理。 5xx：服务器错误，显示错误页面或重试。 2. 内容类型处理 根据Content-Type头，浏览器会以不同方式处理响应：\ntext/html：作为 HTML 文档解析和渲染。 application/json：作为 JSON 数据处理（对于 API 请求）。 text/css：作为样式表处理。 application/javascript：作为 JavaScript 代码执行。 image/*：作为图像处理。 audio/*或video/*：作为多媒体内容处理。 3. 重定向处理 对于重定向响应（301, 302, 303, 307, 308），浏览器会读取Location头并发起新的请求。重定向处理注意事项：\n浏览器会自动跟随重定向，最多通常跟随 20 次。 307 和 308 重定向会保留原始请求的方法和正文。 301 和 302 重定向通常会将 POST 请求转换为 GET 请求。 第八阶段：HTML 解析与 DOM 构建 对于 HTML 文档，浏览器需要将文本转换为结构化的文档对象模型(DOM)。\n1. HTML 解析过程 HTML 解析是一个复杂的过程：\n分词：将 HTML 文本分解为标记（tokens）。 构建节点：将标记转换为 DOM 节点。 构建 DOM 树：根据节点间的嵌套关系构建树状结构。 HTML 解析是增量进行的，这意味着浏览器可以在接收部分 HTML 时就开始构建 DOM 树。\n2. 资源预加载和优先级 现代浏览器会在 HTML 解析期间发现并开始加载各种资源：\n预解析器：在主解析器工作的同时，预解析器会扫描文档寻找资源链接。 预加载扫描：识别","wordCount":"767","inLanguage":"zh","image":"https://www.yss520.online/images/covers/browser-request-journey.jpg","datePublished":"2024-06-18T20:30:00+08:00","dateModified":"2024-06-18T20:30:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.yss520.online/zh/posts/url-to-render/"},"publisher":{"@type":"Organization","name":"Bruce的博客","logo":{"@type":"ImageObject","url":"https://www.yss520.online/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.yss520.online/zh/ accesskey=h title="Bruce的博客 (Alt + H)">Bruce的博客</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://www.yss520.online/en/ title=English aria-label=English>En</a></li></ul></div></div><ul id=menu><li><a href=https://www.yss520.online/zh/ title=首页><span>首页</span></a></li><li><a href=https://www.yss520.online/zh/posts/ title=博客><span>博客</span></a></li><li><a href=https://www.yss520.online/zh/tags/ title=标签><span>标签</span></a></li><li><a href=https://www.yss520.online/zh/categories/ title=分类><span>分类</span></a></li><li><a href=https://www.yss520.online/zh/projects/ title=项目><span>项目</span></a></li><li><a href=https://www.yss520.online/zh/gallery/ title=画廊><span>画廊</span></a></li><li><a href=https://www.yss520.online/zh/about/ title=关于><span>关于</span></a></li><li><a href=https://www.yss520.online/zh/contact/ title=联系><span>联系</span></a></li><li><a href=https://www.yss520.online/zh/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.yss520.online/zh/>主页</a>&nbsp;»&nbsp;<a href=https://www.yss520.online/zh/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">从输入URL到页面呈现：Web请求的神奇旅程</h1><div class=post-description>深入解析浏览器处理网页请求的全过程，包括URL解析、DNS查询、TCP/TLS连接、HTTP请求、服务器处理、DOM构建与页面渲染</div><div class=post-meta><span title='2024-06-18 20:30:00 +0800 +0800'>六月 18, 2024</span>&nbsp;·&nbsp;4 分钟&nbsp;·&nbsp;767 字</div></header><figure class=entry-cover><img loading=eager src=https://www.yss520.online/images/covers/browser-request-journey.jpg alt=浏览器请求流程><figcaption>探索现代Web世界的神秘面纱：从按下回车到页面呈现</figcaption></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e4%bb%8e%e8%be%93%e5%85%a5-url-%e5%88%b0%e9%a1%b5%e9%9d%a2%e5%91%88%e7%8e%b0web-%e8%af%b7%e6%b1%82%e7%9a%84%e7%a5%9e%e5%a5%87%e6%97%85%e7%a8%8b aria-label="从输入 URL 到页面呈现：Web 请求的神奇旅程">从输入 URL 到页面呈现：Web 请求的神奇旅程</a><ul><li><a href=#%e5%89%8d%e8%a8%80 aria-label=前言>前言</a></li><li><a href=#%e7%ac%ac%e4%b8%80%e9%98%b6%e6%ae%b5url-%e8%a7%a3%e6%9e%90%e4%b8%8e%e5%af%bc%e8%88%aa%e5%90%af%e5%8a%a8 aria-label="第一阶段：URL 解析与导航启动">第一阶段：URL 解析与导航启动</a><ul><li><a href=#1-url-%e8%a7%a3%e6%9e%90 aria-label="1. URL 解析">1. URL 解析</a></li><li><a href=#2-%e9%87%8d%e5%ae%9a%e5%90%91%e6%a3%80%e6%9f%a5 aria-label="2. 重定向检查">2. 重定向检查</a></li><li><a href=#3-%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%e6%a3%80%e6%9f%a5 aria-label="3. 浏览器缓存检查">3. 浏览器缓存检查</a></li><li><a href=#4-%e5%ba%94%e7%94%a8%e6%8b%a6%e6%88%aa%e5%99%a8 aria-label="4. 应用拦截器">4. 应用拦截器</a></li></ul></li><li><a href=#%e7%ac%ac%e4%ba%8c%e9%98%b6%e6%ae%b5dns-%e8%a7%a3%e6%9e%90 aria-label="第二阶段：DNS 解析">第二阶段：DNS 解析</a><ul><li><a href=#1-dns-%e8%a7%a3%e6%9e%90%e8%bf%87%e7%a8%8b aria-label="1. DNS 解析过程">1. DNS 解析过程</a></li><li><a href=#2-dns-%e5%ae%89%e5%85%a8%e8%80%83%e9%87%8f aria-label="2. DNS 安全考量">2. DNS 安全考量</a></li></ul></li><li><a href=#%e7%ac%ac%e4%b8%89%e9%98%b6%e6%ae%b5%e5%bb%ba%e7%ab%8b%e7%bd%91%e7%bb%9c%e8%bf%9e%e6%8e%a5 aria-label=第三阶段：建立网络连接>第三阶段：建立网络连接</a><ul><li><a href=#1-tcp-%e8%bf%9e%e6%8e%a5%e5%bb%ba%e7%ab%8b aria-label="1. TCP 连接建立">1. TCP 连接建立</a></li><li><a href=#2-tls-%e6%8f%a1%e6%89%8bhttps aria-label="2. TLS 握手（HTTPS）">2. TLS 握手（HTTPS）</a></li><li><a href=#3-http2-%e5%92%8c-http3-%e7%9a%84%e8%bf%9e%e6%8e%a5%e7%89%b9%e6%80%a7 aria-label="3. HTTP/2 和 HTTP/3 的连接特性">3. HTTP/2 和 HTTP/3 的连接特性</a></li></ul></li><li><a href=#%e7%ac%ac%e5%9b%9b%e9%98%b6%e6%ae%b5%e5%8f%91%e9%80%81-http-%e8%af%b7%e6%b1%82 aria-label="第四阶段：发送 HTTP 请求">第四阶段：发送 HTTP 请求</a><ul><li><a href=#1-http-%e8%af%b7%e6%b1%82%e7%bb%93%e6%9e%84 aria-label="1. HTTP 请求结构">1. HTTP 请求结构</a></li><li><a href=#2-cookie-%e5%92%8c%e7%8a%b6%e6%80%81%e7%ae%a1%e7%90%86 aria-label="2. Cookie 和状态管理">2. Cookie 和状态管理</a></li><li><a href=#3-%e8%b7%a8%e5%9f%9f%e8%af%b7%e6%b1%82%e5%a4%84%e7%90%86 aria-label="3. 跨域请求处理">3. 跨域请求处理</a></li></ul></li><li><a href=#%e7%ac%ac%e4%ba%94%e9%98%b6%e6%ae%b5%e6%9c%8d%e5%8a%a1%e5%99%a8%e5%a4%84%e7%90%86%e8%af%b7%e6%b1%82 aria-label=第五阶段：服务器处理请求>第五阶段：服务器处理请求</a><ul><li><a href=#1-web-%e6%9c%8d%e5%8a%a1%e5%99%a8%e5%a4%84%e7%90%86 aria-label="1. Web 服务器处理">1. Web 服务器处理</a></li><li><a href=#2-%e5%ba%94%e7%94%a8%e6%9c%8d%e5%8a%a1%e5%99%a8%e5%a4%84%e7%90%86 aria-label="2. 应用服务器处理">2. 应用服务器处理</a></li><li><a href=#3-%e6%95%b0%e6%8d%ae%e5%ba%93%e4%ba%a4%e4%ba%92 aria-label="3. 数据库交互">3. 数据库交互</a></li><li><a href=#4-%e7%bc%93%e5%ad%98%e5%b1%82 aria-label="4. 缓存层">4. 缓存层</a></li></ul></li><li><a href=#%e7%ac%ac%e5%85%ad%e9%98%b6%e6%ae%b5%e6%9c%8d%e5%8a%a1%e5%99%a8%e8%bf%94%e5%9b%9e%e5%93%8d%e5%ba%94 aria-label=第六阶段：服务器返回响应>第六阶段：服务器返回响应</a><ul><li><a href=#1-http-%e5%93%8d%e5%ba%94%e7%bb%93%e6%9e%84 aria-label="1. HTTP 响应结构">1. HTTP 响应结构</a></li><li><a href=#2-%e5%8e%8b%e7%bc%a9%e4%b8%8e%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96 aria-label="2. 压缩与性能优化">2. 压缩与性能优化</a></li><li><a href=#3-%e5%ae%89%e5%85%a8%e5%93%8d%e5%ba%94%e5%a4%b4 aria-label="3. 安全响应头">3. 安全响应头</a></li></ul></li><li><a href=#%e7%ac%ac%e4%b8%83%e9%98%b6%e6%ae%b5%e6%b5%8f%e8%a7%88%e5%99%a8%e5%a4%84%e7%90%86%e5%93%8d%e5%ba%94 aria-label=第七阶段：浏览器处理响应>第七阶段：浏览器处理响应</a><ul><li><a href=#1-%e5%93%8d%e5%ba%94%e7%8a%b6%e6%80%81%e7%a0%81%e5%a4%84%e7%90%86 aria-label="1. 响应状态码处理">1. 响应状态码处理</a></li><li><a href=#2-%e5%86%85%e5%ae%b9%e7%b1%bb%e5%9e%8b%e5%a4%84%e7%90%86 aria-label="2. 内容类型处理">2. 内容类型处理</a></li><li><a href=#3-%e9%87%8d%e5%ae%9a%e5%90%91%e5%a4%84%e7%90%86 aria-label="3. 重定向处理">3. 重定向处理</a></li></ul></li><li><a href=#%e7%ac%ac%e5%85%ab%e9%98%b6%e6%ae%b5html-%e8%a7%a3%e6%9e%90%e4%b8%8e-dom-%e6%9e%84%e5%bb%ba aria-label="第八阶段：HTML 解析与 DOM 构建">第八阶段：HTML 解析与 DOM 构建</a><ul><li><a href=#1-html-%e8%a7%a3%e6%9e%90%e8%bf%87%e7%a8%8b aria-label="1. HTML 解析过程">1. HTML 解析过程</a></li><li><a href=#2-%e8%b5%84%e6%ba%90%e9%a2%84%e5%8a%a0%e8%bd%bd%e5%92%8c%e4%bc%98%e5%85%88%e7%ba%a7 aria-label="2. 资源预加载和优先级">2. 资源预加载和优先级</a></li><li><a href=#3-css-%e5%a4%84%e7%90%86%e4%b8%8e-cssom-%e6%9e%84%e5%bb%ba aria-label="3. CSS 处理与 CSSOM 构建">3. CSS 处理与 CSSOM 构建</a></li><li><a href=#4-javascript-%e6%89%a7%e8%a1%8c aria-label="4. JavaScript 执行">4. JavaScript 执行</a></li></ul></li><li><a href=#%e7%ac%ac%e4%b9%9d%e9%98%b6%e6%ae%b5%e6%b8%b2%e6%9f%93%e8%bf%87%e7%a8%8b aria-label=第九阶段：渲染过程>第九阶段：渲染过程</a><ul><li><a href=#1-%e6%b8%b2%e6%9f%93%e6%a0%91%e6%9e%84%e5%bb%ba aria-label="1. 渲染树构建">1. 渲染树构建</a></li><li><a href=#2-%e5%b8%83%e5%b1%80%e8%ae%a1%e7%ae%97 aria-label="2. 布局计算">2. 布局计算</a></li><li><a href=#3-%e7%bb%98%e5%88%b6 aria-label="3. 绘制">3. 绘制</a></li><li><a href=#4-%e5%90%88%e6%88%90%e4%b8%8e%e6%98%be%e7%a4%ba aria-label="4. 合成与显示">4. 合成与显示</a></li></ul></li><li><a href=#%e7%ac%ac%e5%8d%81%e9%98%b6%e6%ae%b5%e4%ba%a4%e4%ba%92%e4%b8%8e%e4%ba%8b%e4%bb%b6%e5%a4%84%e7%90%86 aria-label=第十阶段：交互与事件处理>第十阶段：交互与事件处理</a><ul><li><a href=#1-%e4%ba%8b%e4%bb%b6%e7%9b%91%e5%90%ac%e4%b8%8e%e5%a4%84%e7%90%86 aria-label="1. 事件监听与处理">1. 事件监听与处理</a></li><li><a href=#2-javascript-%e6%89%a7%e8%a1%8c%e6%a8%a1%e5%9e%8b aria-label="2. JavaScript 执行模型">2. JavaScript 执行模型</a></li><li><a href=#3-%e6%b8%b2%e6%9f%93%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96 aria-label="3. 渲染性能优化">3. 渲染性能优化</a></li></ul></li><li><a href=#%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96%e7%9a%84%e5%85%b3%e9%94%ae%e8%8a%82%e7%82%b9 aria-label=性能优化的关键节点>性能优化的关键节点</a><ul><li><a href=#1-%e7%bd%91%e7%bb%9c%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96 aria-label="1. 网络性能优化">1. 网络性能优化</a></li><li><a href=#2-%e8%a7%a3%e6%9e%90%e5%92%8c%e6%b8%b2%e6%9f%93%e4%bc%98%e5%8c%96 aria-label="2. 解析和渲染优化">2. 解析和渲染优化</a></li><li><a href=#3-%e5%8a%a0%e8%bd%bd%e7%ad%96%e7%95%a5%e4%bc%98%e5%8c%96 aria-label="3. 加载策略优化">3. 加载策略优化</a></li></ul></li><li><a href=#%e7%8e%b0%e4%bb%a3-web-%e5%ba%94%e7%94%a8%e7%9a%84%e7%89%b9%e6%ae%8a%e8%80%83%e9%87%8f aria-label="现代 Web 应用的特殊考量">现代 Web 应用的特殊考量</a><ul><li><a href=#1-%e5%8d%95%e9%a1%b5%e5%ba%94%e7%94%a8spa%e7%9a%84%e7%89%b9%e7%82%b9 aria-label="1. 单页应用(SPA)的特点">1. 单页应用(SPA)的特点</a></li><li><a href=#2-pwa-%e5%92%8c%e7%a6%bb%e7%ba%bf%e8%83%bd%e5%8a%9b aria-label="2. PWA 和离线能力">2. PWA 和离线能力</a></li><li><a href=#3-%e5%ae%89%e5%85%a8%e4%b8%8e%e9%9a%90%e7%a7%81 aria-label="3. 安全与隐私">3. 安全与隐私</a></li></ul></li><li><a href=#%e7%bb%93%e8%af%ad aria-label=结语>结语</a></li><li><a href=#%e5%bb%b6%e4%bc%b8%e9%98%85%e8%af%bb%e8%b5%84%e6%ba%90 aria-label=延伸阅读资源>延伸阅读资源</a></li></ul></li></ul></div></details></div><div class=post-content><h1 id=从输入-url-到页面呈现web-请求的神奇旅程>从输入 URL 到页面呈现：Web 请求的神奇旅程<a hidden class=anchor aria-hidden=true href=#从输入-url-到页面呈现web-请求的神奇旅程>#</a></h1><h2 id=前言>前言<a hidden class=anchor aria-hidden=true href=#前言>#</a></h2><p>几乎每次面试都离不开的简单却极其深刻的问题：&ldquo;当我们在浏览器中输入 URL 并按下回车后，到底发生了什么？&ldquo;这个问题涵盖了现代 Web 技术的方方面面，从网络协议到渲染引擎，从 DNS 解析到内容安全策略。</p><p>作为一名在互联网公司工作了 8 年的全栈工程师， 今天我想与大家分享从输入 URL 到页面呈现这个过程中隐藏的复杂细节，揭开现代 Web 世界的神秘面纱。</p><h2 id=第一阶段url-解析与导航启动>第一阶段：URL 解析与导航启动<a hidden class=anchor aria-hidden=true href=#第一阶段url-解析与导航启动>#</a></h2><p>当你在浏览器的地址栏中输入"https://example.com"并按下回车键时，一个复杂的请求流程就此启动。</p><h3 id=1-url-解析>1. URL 解析<a hidden class=anchor aria-hidden=true href=#1-url-解析>#</a></h3><p>浏览器首先会对输入的 URL 进行解析，识别出其中的不同组成部分：</p><ul><li><strong>协议</strong>：https://</li><li><strong>主机名</strong>：example.com</li><li><strong>路径</strong>：/ (根路径)</li><li><strong>查询参数</strong>：无</li><li><strong>片段标识符</strong>：无</li></ul><p>如果你输入的是不完整的 URL（例如只输入"example.com&rdquo;），浏览器会自动补全协议部分，通常默认为"http://&ldquo;或者"https://"。</p><h3 id=2-重定向检查>2. 重定向检查<a hidden class=anchor aria-hidden=true href=#2-重定向检查>#</a></h3><p>浏览器会首先检查是否需要进行任何形式的重定向：</p><ul><li><strong>HSTS 检查</strong>：如果网站在 HSTS（HTTP 严格传输安全）预加载列表中，或之前访问时设置了 HSTS 头部，浏览器会自动将 HTTP 请求升级为 HTTPS。</li><li><strong>301/302 重定向缓存</strong>：浏览器会检查该 URL 是否有永久(301)或临时(302)重定向记录缓存。</li></ul><h3 id=3-浏览器缓存检查>3. 浏览器缓存检查<a hidden class=anchor aria-hidden=true href=#3-浏览器缓存检查>#</a></h3><p>在发起网络请求之前，浏览器会检查本地缓存中是否有可用的响应：</p><ul><li><strong>内存缓存</strong>：首先检查 RAM 中最近访问过的资源。</li><li><strong>磁盘缓存</strong>：然后检查硬盘上存储的资源。</li><li><strong>Service Worker 缓存</strong>：如果网站注册了 Service Worker，浏览器会检查其管理的缓存。</li></ul><p>这个过程遵循一套完备的缓存策略，基于 HTTP 头信息如<code>Cache-Control</code>、<code>ETag</code>和<code>Last-Modified</code>决定是否使用缓存内容。</p><h3 id=4-应用拦截器>4. 应用拦截器<a hidden class=anchor aria-hidden=true href=#4-应用拦截器>#</a></h3><p>现代浏览器扩展和安全软件可能会在此阶段拦截请求：</p><ul><li><strong>浏览器扩展</strong>：广告拦截器或隐私保护工具可能会阻止某些 URL。</li><li><strong>安全检查</strong>：浏览器会对 URL 进行安全检查，防止钓鱼网站或已知的恶意站点。</li></ul><h2 id=第二阶段dns-解析>第二阶段：DNS 解析<a hidden class=anchor aria-hidden=true href=#第二阶段dns-解析>#</a></h2><p>一旦浏览器确定需要发起网络请求，它必须将人类可读的域名转换为机器可理解的 IP 地址。</p><h3 id=1-dns-解析过程>1. DNS 解析过程<a hidden class=anchor aria-hidden=true href=#1-dns-解析过程>#</a></h3><p>DNS（域名系统）解析遵循多级缓存策略，按顺序查询：</p><ul><li><strong>浏览器 DNS 缓存</strong>：浏览器会首先检查自己的 DNS 缓存。</li><li><strong>操作系统 DNS 缓存</strong>：如果浏览器缓存未命中，会查询操作系统缓存。</li><li><strong>路由器 DNS 缓存</strong>：接下来查询本地网络路由器的缓存。</li><li><strong>ISP DNS 服务器</strong>：如果本地都未命中，请求会发送至 ISP 的 DNS 服务器。</li><li><strong>递归 DNS 查询</strong>：如果 ISP 的 DNS 服务器没有答案，它会启动递归查询：<ul><li>查询根域名服务器(.com，.org 等的管理者)</li><li>查询顶级域名服务器(例如.com 的管理者)</li><li>查询权威域名服务器(管理 example.com 的服务器)</li></ul></li></ul><p>每一步 DNS 查询都可能涉及多个服务器和复杂的负载均衡策略。例如，大型网站通常使用地理分布式 DNS，根据用户位置返回最近数据中心的 IP 地址。</p><h3 id=2-dns-安全考量>2. DNS 安全考量<a hidden class=anchor aria-hidden=true href=#2-dns-安全考量>#</a></h3><p>现代 DNS 解析过程中还包含多重安全机制：</p><ul><li><strong>DNSSEC</strong>：数字签名验证，防止 DNS 记录被篡改。</li><li><strong>DNS over HTTPS (DoH)</strong> 和 <strong>DNS over TLS (DoT)</strong>：加密 DNS 查询，防止窃听。</li><li><strong>DNS 重绑定保护</strong>：防止攻击者利用 DNS 变更进行攻击。</li></ul><h2 id=第三阶段建立网络连接>第三阶段：建立网络连接<a hidden class=anchor aria-hidden=true href=#第三阶段建立网络连接>#</a></h2><p>获取到目标服务器的 IP 地址后，浏览器需要建立一个网络连接。</p><h3 id=1-tcp-连接建立>1. TCP 连接建立<a hidden class=anchor aria-hidden=true href=#1-tcp-连接建立>#</a></h3><p>对于 HTTP/1.1 和一些 HTTP/2 的实现，浏览器会与服务器建立 TCP 连接，这涉及著名的三次握手过程：</p><ol><li><strong>SYN</strong>：客户端发送 SYN（同步）包到服务器，表明它想建立连接，并包含初始序列号。</li><li><strong>SYN-ACK</strong>：服务器回应一个 SYN-ACK（同步-确认）包，确认收到客户端的 SYN，并包含服务器自己的初始序列号。</li><li><strong>ACK</strong>：客户端发送 ACK（确认）包，确认收到服务器的 SYN-ACK。</li></ol><p>这个过程确保了双方都准备好发送和接收数据，并且都知道对方的初始序列号。</p><h3 id=2-tls-握手https>2. TLS 握手（HTTPS）<a hidden class=anchor aria-hidden=true href=#2-tls-握手https>#</a></h3><p>如果是 HTTPS 连接，在 TCP 连接建立后，还需要进行 TLS 握手来建立加密通道：</p><ol><li><strong>Client Hello</strong>：客户端发送支持的加密套件和一个随机数。</li><li><strong>Server Hello</strong>：服务器选择一个加密套件，并发送自己的随机数和数字证书。</li><li><strong>证书验证</strong>：客户端验证服务器的数字证书是否由受信任的证书颁发机构(CA)签发。</li><li><strong>密钥交换</strong>：使用非对称加密，客户端和服务器安全地协商出会话密钥。</li><li><strong>切换到加密通信</strong>：双方开始使用对称加密和协商好的会话密钥进行后续通信。</li></ol><p>TLS 1.3（最新版本）简化了这个流程，只需 1-RTT（往返时间）即可完成握手，相比 TLS 1.2 的 2-RTT 显著提升了性能。</p><h3 id=3-http2-和-http3-的连接特性>3. HTTP/2 和 HTTP/3 的连接特性<a hidden class=anchor aria-hidden=true href=#3-http2-和-http3-的连接特性>#</a></h3><p>现代 Web 应用越来越多地采用 HTTP/2 和 HTTP/3 协议：</p><ul><li><strong>HTTP/2</strong>：使用多路复用，在单一 TCP 连接上并行处理多个请求，减少了连接建立的开销。</li><li><strong>HTTP/3</strong>：基于 QUIC 协议（采用 UDP 而非 TCP），提供内置加密，消除了 TCP+TLS 的额外延迟，实现 0-RTT 连接恢复。</li></ul><h2 id=第四阶段发送-http-请求>第四阶段：发送 HTTP 请求<a hidden class=anchor aria-hidden=true href=#第四阶段发送-http-请求>#</a></h2><p>连接建立后，浏览器会构造并发送 HTTP 请求。</p><h3 id=1-http-请求结构>1. HTTP 请求结构<a hidden class=anchor aria-hidden=true href=#1-http-请求结构>#</a></h3><p>一个完整的 HTTP 请求通常包含：</p><ul><li><strong>请求行</strong>：包含 HTTP 方法（如 GET）、资源路径和 HTTP 版本。</li><li><strong>请求头</strong>：包含多个键值对，提供关于请求和客户端的附加信息。</li><li><strong>空行</strong>：表示头部结束。</li><li><strong>请求体</strong>：对于 POST 等方法，包含要发送的数据。</li></ul><p>一个典型的请求头包含诸多信息：</p><ul><li><code>User-Agent</code>：浏览器类型和版本</li><li><code>Accept</code>：可接受的响应内容类型</li><li><code>Accept-Language</code>：偏好的语言</li><li><code>Accept-Encoding</code>：支持的压缩方式</li><li><code>Connection</code>：连接管理选项</li><li><code>Cookie</code>：之前从该站点接收的 Cookie</li><li><code>Cache-Control</code>：缓存策略指令</li><li><code>Referer</code>：请求来源页面</li><li><code>Authorization</code>：认证凭证</li></ul><h3 id=2-cookie-和状态管理>2. Cookie 和状态管理<a hidden class=anchor aria-hidden=true href=#2-cookie-和状态管理>#</a></h3><p>HTTP 本质上是无状态协议，但通过 Cookie 机制可以实现状态管理：</p><ul><li>浏览器会自动将与目标域名相关的所有 Cookie 附加到请求头中。</li><li>这些 Cookie 可能包含会话标识符、用户偏好设置或跟踪数据。</li><li>现代 Web 应用还可能使用<code>localStorage</code>、<code>sessionStorage</code>或<code>IndexedDB</code>等机制在客户端存储数据。</li></ul><h3 id=3-跨域请求处理>3. 跨域请求处理<a hidden class=anchor aria-hidden=true href=#3-跨域请求处理>#</a></h3><p>浏览器对跨域请求有严格限制（同源策略），涉及到 CORS（跨域资源共享）机制：</p><ul><li>对于跨域请求，浏览器会先发送一个"预检"OPTIONS 请求。</li><li>服务器必须在响应中包含适当的 CORS 头，如<code>Access-Control-Allow-Origin</code>。</li><li>如果未获得正确授权，浏览器会阻止请求或限制响应处理。</li></ul><h2 id=第五阶段服务器处理请求>第五阶段：服务器处理请求<a hidden class=anchor aria-hidden=true href=#第五阶段服务器处理请求>#</a></h2><p>HTTP 请求到达服务器后，服务器需要处理这个请求并生成响应。</p><h3 id=1-web-服务器处理>1. Web 服务器处理<a hidden class=anchor aria-hidden=true href=#1-web-服务器处理>#</a></h3><p>首先，Web 服务器（如 Nginx、Apache、IIS 等）会接收并初步处理请求：</p><ul><li><strong>负载均衡</strong>：大型网站通常会使用负载均衡器将请求分发到多台服务器。</li><li><strong>URL 路由</strong>：根据 URL 确定如何处理请求，可能是提供静态文件或者转发到应用服务器。</li><li><strong>HTTPS 解密</strong>：解密客户端发送的加密数据。</li></ul><h3 id=2-应用服务器处理>2. 应用服务器处理<a hidden class=anchor aria-hidden=true href=#2-应用服务器处理>#</a></h3><p>动态内容通常由应用服务器处理：</p><ul><li><strong>请求路由</strong>：基于 URL 路径将请求路由到相应的处理器/控制器。</li><li><strong>身份验证</strong>：验证用户身份（如果需要）。</li><li><strong>业务逻辑执行</strong>：执行与请求相关的业务逻辑。</li><li><strong>数据存取</strong>：与数据库或其他存储系统交互。</li><li><strong>模板渲染</strong>：使用模板引擎生成 HTML 响应。</li><li><strong>API 处理</strong>：对于 API 请求，处理并返回结构化数据（如 JSON）。</li></ul><h3 id=3-数据库交互>3. 数据库交互<a hidden class=anchor aria-hidden=true href=#3-数据库交互>#</a></h3><p>许多 Web 应用需要与数据库交互：</p><ul><li><strong>连接池管理</strong>：维护预先建立的数据库连接，以减少开销。</li><li><strong>查询执行</strong>：执行 SQL 查询或 NoSQL 操作。</li><li><strong>事务处理</strong>：确保数据操作的原子性和一致性。</li><li><strong>查询缓存</strong>：缓存常见查询结果，提高性能。</li><li><strong>ORM 中间层</strong>：许多应用使用对象关系映射（ORM）框架简化数据库交互。</li></ul><h3 id=4-缓存层>4. 缓存层<a hidden class=anchor aria-hidden=true href=#4-缓存层>#</a></h3><p>现代 Web 架构通常包含多层缓存：</p><ul><li><strong>内存缓存</strong>：如 Redis 或 Memcached，存储热点数据。</li><li><strong>HTTP 缓存头生成</strong>：设置适当的缓存控制头，指导客户端和中间代理如何缓存响应。</li><li><strong>CDN 集成</strong>：对于静态资源，可能会更新 CDN 或配置 CDN 缓存规则。</li></ul><h2 id=第六阶段服务器返回响应>第六阶段：服务器返回响应<a hidden class=anchor aria-hidden=true href=#第六阶段服务器返回响应>#</a></h2><p>处理完请求后，服务器会构造并返回 HTTP 响应。</p><h3 id=1-http-响应结构>1. HTTP 响应结构<a hidden class=anchor aria-hidden=true href=#1-http-响应结构>#</a></h3><p>一个完整的 HTTP 响应包含：</p><ul><li><strong>状态行</strong>：包含 HTTP 版本、状态码和状态消息。</li><li><strong>响应头</strong>：包含关于响应和服务器的附加信息。</li><li><strong>空行</strong>：表示头部结束。</li><li><strong>响应体</strong>：请求的资源内容。</li></ul><p>常见的响应头包括：</p><ul><li><code>Content-Type</code>：响应体的媒体类型</li><li><code>Content-Length</code>：响应体的字节长度</li><li><code>Content-Encoding</code>：响应体的编码方式</li><li><code>Cache-Control</code>：缓存指令</li><li><code>ETag</code>：资源的唯一标识符</li><li><code>Set-Cookie</code>：设置 Cookie</li><li><code>X-Content-Type-Options</code>：防止 MIME 类型嗅探</li><li><code>Content-Security-Policy</code>：内容安全策略</li></ul><h3 id=2-压缩与性能优化>2. 压缩与性能优化<a hidden class=anchor aria-hidden=true href=#2-压缩与性能优化>#</a></h3><p>为了减少传输大小，服务器通常会压缩响应体：</p><ul><li><strong>Gzip/Deflate</strong>：传统的压缩算法，兼容性好。</li><li><strong>Brotli</strong>：更现代的压缩算法，提供更高的压缩率。</li><li><strong>图像优化</strong>：自适应图像格式（如 WebP、AVIF）和尺寸。</li><li><strong>HTTP/2 服务器推送</strong>：主动推送关联资源，减少后续请求。</li></ul><h3 id=3-安全响应头>3. 安全响应头<a hidden class=anchor aria-hidden=true href=#3-安全响应头>#</a></h3><p>现代 Web 应用需要设置各种安全相关的响应头：</p><ul><li><code>Strict-Transport-Security</code>：强制使用 HTTPS。</li><li><code>X-Frame-Options</code>：防止点击劫持攻击。</li><li><code>X-XSS-Protection</code>：帮助阻止 XSS 攻击。</li><li><code>Content-Security-Policy</code>：限制资源加载和脚本执行。</li><li><code>Referrer-Policy</code>：控制 Referer 头的信息量。</li><li><code>Permissions-Policy</code>：控制浏览器功能的使用。</li></ul><h2 id=第七阶段浏览器处理响应>第七阶段：浏览器处理响应<a hidden class=anchor aria-hidden=true href=#第七阶段浏览器处理响应>#</a></h2><p>当浏览器接收到服务器的响应后，将开始处理这些数据。</p><h3 id=1-响应状态码处理>1. 响应状态码处理<a hidden class=anchor aria-hidden=true href=#1-响应状态码处理>#</a></h3><p>浏览器根据 HTTP 状态码决定如何处理响应：</p><ul><li><strong>2xx</strong>：成功响应，继续处理响应体。</li><li><strong>3xx</strong>：重定向，浏览器会按照<code>Location</code>头跟随重定向。</li><li><strong>4xx</strong>：客户端错误，显示错误页面或者进行特殊处理。</li><li><strong>5xx</strong>：服务器错误，显示错误页面或重试。</li></ul><h3 id=2-内容类型处理>2. 内容类型处理<a hidden class=anchor aria-hidden=true href=#2-内容类型处理>#</a></h3><p>根据<code>Content-Type</code>头，浏览器会以不同方式处理响应：</p><ul><li><strong>text/html</strong>：作为 HTML 文档解析和渲染。</li><li><strong>application/json</strong>：作为 JSON 数据处理（对于 API 请求）。</li><li><strong>text/css</strong>：作为样式表处理。</li><li><strong>application/javascript</strong>：作为 JavaScript 代码执行。</li><li><strong>image/*</strong>：作为图像处理。</li><li><strong>audio/*<strong>或</strong>video/*</strong>：作为多媒体内容处理。</li></ul><h3 id=3-重定向处理>3. 重定向处理<a hidden class=anchor aria-hidden=true href=#3-重定向处理>#</a></h3><p>对于重定向响应（301, 302, 303, 307, 308），浏览器会读取<code>Location</code>头并发起新的请求。重定向处理注意事项：</p><ul><li>浏览器会自动跟随重定向，最多通常跟随 20 次。</li><li>307 和 308 重定向会保留原始请求的方法和正文。</li><li>301 和 302 重定向通常会将 POST 请求转换为 GET 请求。</li></ul><h2 id=第八阶段html-解析与-dom-构建>第八阶段：HTML 解析与 DOM 构建<a hidden class=anchor aria-hidden=true href=#第八阶段html-解析与-dom-构建>#</a></h2><p>对于 HTML 文档，浏览器需要将文本转换为结构化的文档对象模型(DOM)。</p><h3 id=1-html-解析过程>1. HTML 解析过程<a hidden class=anchor aria-hidden=true href=#1-html-解析过程>#</a></h3><p>HTML 解析是一个复杂的过程：</p><ul><li><strong>分词</strong>：将 HTML 文本分解为标记（tokens）。</li><li><strong>构建节点</strong>：将标记转换为 DOM 节点。</li><li><strong>构建 DOM 树</strong>：根据节点间的嵌套关系构建树状结构。</li></ul><p>HTML 解析是增量进行的，这意味着浏览器可以在接收部分 HTML 时就开始构建 DOM 树。</p><h3 id=2-资源预加载和优先级>2. 资源预加载和优先级<a hidden class=anchor aria-hidden=true href=#2-资源预加载和优先级>#</a></h3><p>现代浏览器会在 HTML 解析期间发现并开始加载各种资源：</p><ul><li><strong>预解析器</strong>：在主解析器工作的同时，预解析器会扫描文档寻找资源链接。</li><li><strong>预加载扫描</strong>：识别<code>&lt;script></code>、<code>&lt;link></code>、<code>&lt;img></code>等标签中引用的资源。</li><li><strong>资源优先级</strong>：为不同类型的资源分配不同的加载优先级（CSS 通常高于图像）。</li><li><strong>响应预加载指令</strong>：处理<code>&lt;link rel="preload"></code>等特殊指令。</li></ul><h3 id=3-css-处理与-cssom-构建>3. CSS 处理与 CSSOM 构建<a hidden class=anchor aria-hidden=true href=#3-css-处理与-cssom-构建>#</a></h3><p>在解析 HTML 的同时，浏览器会处理 CSS 样式：</p><ul><li><strong>下载 CSS</strong>：获取<code>&lt;link></code>标签引用的外部样式表。</li><li><strong>解析 CSS</strong>：将 CSS 文本转换为规则集。</li><li><strong>构建 CSSOM</strong>：创建 CSS 对象模型，表示所有样式规则及其继承关系。</li><li><strong>样式计算</strong>：确定每个 DOM 元素应用哪些样式规则。</li></ul><p>CSS 被视为"渲染阻塞资源&rdquo;，因为在完成 CSSOM 构建前，浏览器通常不会开始渲染页面。</p><h3 id=4-javascript-执行>4. JavaScript 执行<a hidden class=anchor aria-hidden=true href=#4-javascript-执行>#</a></h3><p>当解析器遇到<code>&lt;script></code>标签时，会暂停 HTML 解析，转而执行 JavaScript 代码：</p><ul><li><strong>下载脚本</strong>：对于外部脚本，需要先下载文件。</li><li><strong>编译执行</strong>：JavaScript 引擎编译并执行代码。</li><li><strong>DOM 交互</strong>：JavaScript 可以修改已构建的 DOM 节点。</li><li><strong>CSSOM 交互</strong>：JavaScript 可以查询和修改样式信息。</li></ul><p>JavaScript 执行会阻塞 HTML 解析，除非脚本标记为<code>async</code>或<code>defer</code>：</p><ul><li><strong>async</strong>：异步下载脚本，下载完成后立即执行，不保证执行顺序。</li><li><strong>defer</strong>：异步下载脚本，但延迟到 HTML 解析完成后按顺序执行。</li></ul><h2 id=第九阶段渲染过程>第九阶段：渲染过程<a hidden class=anchor aria-hidden=true href=#第九阶段渲染过程>#</a></h2><p>HTML 解析和 CSS 处理完成后，浏览器会开始页面的视觉渲染过程。</p><h3 id=1-渲染树构建>1. 渲染树构建<a hidden class=anchor aria-hidden=true href=#1-渲染树构建>#</a></h3><p>渲染树是 DOM 树和 CSSOM 的组合，但只包含可见元素：</p><ul><li><strong>筛选不可见元素</strong>：<code>display: none</code>的元素不会包含在渲染树中。</li><li><strong>计算可见性</strong>：确定元素是否可见（如<code>visibility: hidden</code>的元素会在渲染树中，但不可见）。</li><li><strong>应用 CSS 规则</strong>：为每个可见元素应用计算后的样式。</li></ul><h3 id=2-布局计算>2. 布局计算<a hidden class=anchor aria-hidden=true href=#2-布局计算>#</a></h3><p>布局（也称为重排或回流）确定每个元素的确切位置和大小：</p><ul><li><strong>盒模型计算</strong>：确定每个元素的内容区、内边距、边框和外边距。</li><li><strong>定位方案应用</strong>：应用相对、绝对、固定或粘性定位。</li><li><strong>流式布局</strong>：对于标准文档流中的元素，计算其在页面中的确切位置。</li><li><strong>弹性盒和网格布局</strong>：处理更复杂的 CSS 布局系统。</li><li><strong>视口适应</strong>：根据视口大小调整布局（响应式设计）。</li></ul><p>布局是一个计算密集型的过程，特别是对于复杂的页面。</p><h3 id=3-绘制>3. 绘制<a hidden class=anchor aria-hidden=true href=#3-绘制>#</a></h3><p>绘制阶段将渲染树转换为屏幕上的像素：</p><ul><li><strong>层创建</strong>：将页面内容分解为多个层。</li><li><strong>栅格化</strong>：将每个层转换为像素。</li><li><strong>纹理合成</strong>：将所有层组合成最终图像。</li><li><strong>处理变换和透明度</strong>：应用 CSS 变换和透明度效果。</li></ul><h3 id=4-合成与显示>4. 合成与显示<a hidden class=anchor aria-hidden=true href=#4-合成与显示>#</a></h3><p>最后阶段是将所有层合成并显示到屏幕上：</p><ul><li><strong>层排序</strong>：确定层的正确堆叠顺序（Z 轴顺序）。</li><li><strong>层合成</strong>：将所有层组合成最终图像。</li><li><strong>渲染到显示器</strong>：将最终图像发送到显示器进行显示。</li></ul><p>现代浏览器使用 GPU 加速来提高合成性能，特别是对于动画和变换。</p><h2 id=第十阶段交互与事件处理>第十阶段：交互与事件处理<a hidden class=anchor aria-hidden=true href=#第十阶段交互与事件处理>#</a></h2><p>页面加载后，浏览器开始响应用户交互和处理各种事件。</p><h3 id=1-事件监听与处理>1. 事件监听与处理<a hidden class=anchor aria-hidden=true href=#1-事件监听与处理>#</a></h3><p>浏览器设置各种事件监听器：</p><ul><li><strong>用户交互事件</strong>：点击、滚动、键盘输入等。</li><li><strong>定时器事件</strong>：<code>setTimeout</code>和<code>setInterval</code>触发的事件。</li><li><strong>网络事件</strong>：AJAX 请求完成、WebSocket 消息等。</li><li><strong>动画事件</strong>：CSS 动画和过渡完成事件。</li></ul><h3 id=2-javascript-执行模型>2. JavaScript 执行模型<a hidden class=anchor aria-hidden=true href=#2-javascript-执行模型>#</a></h3><p>浏览器使用单线程事件循环模型执行 JavaScript：</p><ul><li><strong>任务队列</strong>：浏览器维护一个等待执行的任务队列。</li><li><strong>事件循环</strong>：不断从队列中取出任务并执行。</li><li><strong>微任务</strong>：Promise 回调等微任务在当前任务完成后立即执行。</li><li><strong>宏任务</strong>：定时器回调等宏任务在下一次事件循环迭代中执行。</li></ul><h3 id=3-渲染性能优化>3. 渲染性能优化<a hidden class=anchor aria-hidden=true href=#3-渲染性能优化>#</a></h3><p>浏览器会尝试保持页面交互的流畅：</p><ul><li><strong>请求动画帧</strong>：使用<code>requestAnimationFrame</code>同步视觉更新。</li><li><strong>空闲回调</strong>：使用<code>requestIdleCallback</code>在浏览器空闲时执行低优先级任务。</li><li><strong>防抖和节流</strong>：限制事件处理的频率，特别是对于滚动和调整大小等高频事件。</li><li><strong>避免布局抖动</strong>：批量读取 DOM 属性，然后批量修改 DOM，避免强制同步布局。</li></ul><h2 id=性能优化的关键节点>性能优化的关键节点<a hidden class=anchor aria-hidden=true href=#性能优化的关键节点>#</a></h2><p>在这个复杂的过程中，有多个关键节点可以进行优化：</p><h3 id=1-网络性能优化>1. 网络性能优化<a hidden class=anchor aria-hidden=true href=#1-网络性能优化>#</a></h3><p>减少网络延迟和数据传输：</p><ul><li><strong>DNS 预解析</strong>：使用<code>&lt;link rel="dns-prefetch"></code>预先解析域名。</li><li><strong>预连接</strong>：使用<code>&lt;link rel="preconnect"></code>提前建立连接。</li><li><strong>资源提示</strong>：使用<code>preload</code>、<code>prefetch</code>和<code>prerender</code>指令优化资源加载。</li><li><strong>HTTP/2 或 HTTP/3</strong>：利用多路复用减少连接开销。</li><li><strong>CDN 分发</strong>：将静态资源部署到离用户更近的 CDN 节点。</li><li><strong>资源压缩</strong>：使用 Gzip 或 Brotli 压缩文本资源。</li><li><strong>缓存策略</strong>：合理设置 HTTP 缓存头，减少不必要的请求。</li></ul><h3 id=2-解析和渲染优化>2. 解析和渲染优化<a hidden class=anchor aria-hidden=true href=#2-解析和渲染优化>#</a></h3><p>加速页面解析和渲染过程：</p><ul><li><strong>关键 CSS 内联</strong>：将关键路径 CSS 直接内联在 HTML 中。</li><li><strong>异步/延迟脚本</strong>：使用<code>async</code>和<code>defer</code>属性避免 JavaScript 阻塞解析。</li><li><strong>避免大型第三方脚本</strong>：第三方脚本往往是性能瓶颈。</li><li><strong>优化 DOM 大小</strong>：保持 DOM 节点数量在合理范围内。</li><li><strong>避免复杂选择器</strong>：简化 CSS 选择器，减少样式计算时间。</li><li><strong>CSS contain 属性</strong>：限制元素样式变化的影响范围。</li><li><strong>合理使用 will-change</strong>：提示浏览器提前为元素创建单独的层。</li></ul><h3 id=3-加载策略优化>3. 加载策略优化<a hidden class=anchor aria-hidden=true href=#3-加载策略优化>#</a></h3><p>优化资源加载顺序和优先级：</p><ul><li><strong>关键渲染路径优化</strong>：识别并优先加载关键资源。</li><li><strong>懒加载</strong>：延迟非关键资源（如屏幕外图像）的加载。</li><li><strong>代码拆分</strong>：将 JavaScript 拆分为较小的块，按需加载。</li><li><strong>字体优化</strong>：使用<code>font-display</code>和字体子集来优化字体加载。</li><li><strong>图像优化</strong>：使用现代格式（WebP、AVIF）和响应式图像。</li></ul><h2 id=现代-web-应用的特殊考量>现代 Web 应用的特殊考量<a hidden class=anchor aria-hidden=true href=#现代-web-应用的特殊考量>#</a></h2><p>现代 Web 应用比传统网站更加复杂，涉及到一些特殊因素：</p><h3 id=1-单页应用spa的特点>1. 单页应用(SPA)的特点<a hidden class=anchor aria-hidden=true href=#1-单页应用spa的特点>#</a></h3><p>SPA 与传统网站的加载模式不同：</p><ul><li><strong>初始加载</strong>：加载应用骨架和核心 JavaScript。</li><li><strong>路由管理</strong>：使用前端路由处理导航，不重新加载整个页面。</li><li><strong>数据获取</strong>：通过 API 异步获取数据。</li><li><strong>状态管理</strong>：在客户端维护应用状态。</li><li><strong>渐进式增强</strong>：逐步加载功能和内容。</li></ul><h3 id=2-pwa-和离线能力>2. PWA 和离线能力<a hidden class=anchor aria-hidden=true href=#2-pwa-和离线能力>#</a></h3><p>渐进式 Web 应用(PWA)提供接近原生应用的体验：</p><ul><li><strong>Service Worker</strong>：拦截网络请求，实现离线缓存和背景同步。</li><li><strong>App Shell 模型</strong>：快速加载应用界面骨架，后续填充内容。</li><li><strong>Cache API</strong>：精细控制资源缓存。</li><li><strong>推送通知</strong>：即使浏览器未打开也能接收通知。</li><li><strong>添加到主屏幕</strong>：提供类似原生应用的安装体验。</li></ul><h3 id=3-安全与隐私>3. 安全与隐私<a hidden class=anchor aria-hidden=true href=#3-安全与隐私>#</a></h3><p>现代 Web 应用面临更严格的安全和隐私要求：</p><ul><li><strong>HTTPS 普及</strong>：几乎所有网站都需要使用 HTTPS。</li><li><strong>SameSite Cookie</strong>：防止跨站请求伪造攻击。</li><li><strong>内容安全策略</strong>：限制资源加载和脚本执行。</li><li><strong>跨域资源共享</strong>：控制跨域数据访问。</li><li><strong>浏览器指纹限制</strong>：各大浏览器逐步限制跟踪技术。</li><li><strong>Permission API</strong>：显式请求访问相机、位置等敏感功能的权限。</li></ul><h2 id=结语>结语<a hidden class=anchor aria-hidden=true href=#结语>#</a></h2><p>从输入 URL 到页面呈现，是一个涉及多学科、多系统协作的复杂过程。了解这个过程不仅有助于开发者进行性能调优和问题诊断，也有助于理解现代 Web 平台的工作原理和演进方向。</p><p>在我的职业生涯中，这种全局视角多次帮助我识别和解决了系统中的瓶颈——从 DNS 解析过慢到渲染性能不佳。希望这篇详解能够为你提供类似的洞察力，无论你是前端开发者、后端工程师还是全栈开发人员。</p><p>下次当你打开一个网页时，不妨想象这背后的数千行代码和几十台服务器正在高速协作，只为在一秒内将信息呈现在你面前。这就是现代 Web 的魔力所在。</p><h2 id=延伸阅读资源>延伸阅读资源<a hidden class=anchor aria-hidden=true href=#延伸阅读资源>#</a></h2><ul><li><a href=https://developer.mozilla.org/zh-CN/docs/Web/API/Navigation_timing_API>Navigation Timing API</a> - 精确测量页面加载性能的 API</li><li><a href=https://developers.google.com/web/fundamentals/performance/critical-rendering-path/>Critical Rendering Path</a> - Google 开发者文档关于关键渲染路径的深入解析</li><li><a href=https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/>How Browsers Work</a> - 浏览器内部工作原理的经典文章</li><li>[High Performance Browser Networking](<a href=https://hpbn.co>https://hpbn.co</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.yss520.online/zh/tags/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86/>浏览器原理</a></li><li><a href=https://www.yss520.online/zh/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/>网络协议</a></li><li><a href=https://www.yss520.online/zh/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/>前端开发</a></li><li><a href=https://www.yss520.online/zh/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/>性能优化</a></li><li><a href=https://www.yss520.online/zh/tags/web%E6%8A%80%E6%9C%AF/>Web技术</a></li><li><a href=https://www.yss520.online/zh/tags/http%E5%8D%8F%E8%AE%AE/>HTTP协议</a></li><li><a href=https://www.yss520.online/zh/tags/%E6%B8%B2%E6%9F%93%E5%BC%95%E6%93%8E/>渲染引擎</a></li></ul><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 从输入URL到页面呈现：Web请求的神奇旅程 on x" href="https://x.com/intent/tweet/?text=%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e5%91%88%e7%8e%b0%ef%bc%9aWeb%e8%af%b7%e6%b1%82%e7%9a%84%e7%a5%9e%e5%a5%87%e6%97%85%e7%a8%8b&amp;url=https%3a%2f%2fwww.yss520.online%2fzh%2fposts%2furl-to-render%2f&amp;hashtags=%e6%b5%8f%e8%a7%88%e5%99%a8%e5%8e%9f%e7%90%86%2c%e7%bd%91%e7%bb%9c%e5%8d%8f%e8%ae%ae%2c%e5%89%8d%e7%ab%af%e5%bc%80%e5%8f%91%2c%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96%2cWeb%e6%8a%80%e6%9c%af%2cHTTP%e5%8d%8f%e8%ae%ae%2c%e6%b8%b2%e6%9f%93%e5%bc%95%e6%93%8e"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 从输入URL到页面呈现：Web请求的神奇旅程 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.yss520.online%2fzh%2fposts%2furl-to-render%2f&amp;title=%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e5%91%88%e7%8e%b0%ef%bc%9aWeb%e8%af%b7%e6%b1%82%e7%9a%84%e7%a5%9e%e5%a5%87%e6%97%85%e7%a8%8b&amp;summary=%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e5%91%88%e7%8e%b0%ef%bc%9aWeb%e8%af%b7%e6%b1%82%e7%9a%84%e7%a5%9e%e5%a5%87%e6%97%85%e7%a8%8b&amp;source=https%3a%2f%2fwww.yss520.online%2fzh%2fposts%2furl-to-render%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 从输入URL到页面呈现：Web请求的神奇旅程 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.yss520.online%2fzh%2fposts%2furl-to-render%2f&title=%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e5%91%88%e7%8e%b0%ef%bc%9aWeb%e8%af%b7%e6%b1%82%e7%9a%84%e7%a5%9e%e5%a5%87%e6%97%85%e7%a8%8b"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 从输入URL到页面呈现：Web请求的神奇旅程 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.yss520.online%2fzh%2fposts%2furl-to-render%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 从输入URL到页面呈现：Web请求的神奇旅程 on whatsapp" href="https://api.whatsapp.com/send?text=%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e5%91%88%e7%8e%b0%ef%bc%9aWeb%e8%af%b7%e6%b1%82%e7%9a%84%e7%a5%9e%e5%a5%87%e6%97%85%e7%a8%8b%20-%20https%3a%2f%2fwww.yss520.online%2fzh%2fposts%2furl-to-render%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 从输入URL到页面呈现：Web请求的神奇旅程 on telegram" href="https://telegram.me/share/url?text=%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e5%91%88%e7%8e%b0%ef%bc%9aWeb%e8%af%b7%e6%b1%82%e7%9a%84%e7%a5%9e%e5%a5%87%e6%97%85%e7%a8%8b&amp;url=https%3a%2f%2fwww.yss520.online%2fzh%2fposts%2furl-to-render%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 从输入URL到页面呈现：Web请求的神奇旅程 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%e4%bb%8e%e8%be%93%e5%85%a5URL%e5%88%b0%e9%a1%b5%e9%9d%a2%e5%91%88%e7%8e%b0%ef%bc%9aWeb%e8%af%b7%e6%b1%82%e7%9a%84%e7%a5%9e%e5%a5%87%e6%97%85%e7%a8%8b&u=https%3a%2f%2fwww.yss520.online%2fzh%2fposts%2furl-to-render%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://www.yss520.online/zh/>Bruce的博客</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script src=/js/lightbox.js></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>